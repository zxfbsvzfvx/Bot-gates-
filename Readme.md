# Телеграм бот для ворот.
## Функционал бота
Этот бот должен принимать заложенные в нем команды через телеграм, и выполнять их, основная 
задача - открытие ворот по команде и измерение температуры рядом с реле.

## Компоненты
Нам необходимы :
* Модуль реле ESP32 двухканальный WiFi Bluetooth (или любой другой моулю имеющий выход в интернэт)
ссылка: https://www.ozon.ru/product/modul-rele-esp32-dvuhkanalnyy-wifi-bluetooth-1767632580/?__rr=1&abt_att=1&origin_referer=yandex.ru
* Модуль измерения температуры(термостат) MAX31865 для высокоточного датчика PT100 UART (или любой другой модуль измеряющий температуру).
ссылка: https://www.ozon.ru/product/modul-izmereniya-temperatury-termostat-max31865-dlya-vysokotochnogo-datchika-pt100-uart-1087431024/
* Ворота с механизмом открытия.
* Wi-Fi роутер (или можно купить модуь, который имеет выход в интернэт по сим-карте).
ссылка: https://market.yandex.ru/card/wi-fi-router-asus-tuf-ax3000/102185153528?do-waremd5=7npM428Uho3utwZNWNfCRQ&clid=1601&utm_source=yandex&utm_medium=search&utm_campaign=ymp_offer_dp_komputer_model_mrkscr_top_bko_dyb_search_rus&utm_content=cid%3A115707839%7Cgid%3A5565835793%7Caid%3A1873011495206387942%7Cph%3A205565835793%7Cpt%3Apremium%7Cpn%3A1%7Csrc%3Anone%7Cst%3Asearch%7Crid%3A205565835793%7Ccgcid%3A0&yclid=4155581651849576447&ogV=-11

## Сборка компонентов
Все было собрано в эмуляторе, вот ссылка на сборку https://wokwi.com/projects/453758447609091073

## Управление реле
Управление осущевствляестся из телеграмм бота, сам код для реле был написан на mini python, код представлен в файле Rele.txt.
Бот отвечает на такие команды как /temp - отправляет в чат температуру отображаемую на термостате, /open - открывает ворота, /reset - сбрасывает все настройки , /close - закрывает ворота , /help - помогает с управлением, подробнее описывает команды . 


## Схема соеденения между устройствами

Ораньжевые стрелочки обозначают связь питания. Две параллельные прямы - связь  через интернет. Стрелочка в обе стороны значит соединение черезкабели.


![Иллюстррация связей](X.png)

## Так же нужно выбрать тип связи между Tg ботом и ESP 32, и настроить ее.
Я выбрал связь через webhook. Webhook — это автоматизированный метод передачи данных между системами в реальном времени, использующий POST-запросы для мгновенного уведомления о событиях. При возникновении события, источник отправляет данные на заранее настроенный URL-адрес получателя. Это обеспечивает быструю автоматизацию, исключая необходимость постоянно опрашивать сервер. 


